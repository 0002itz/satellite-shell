---
import { reference } from 'astro:content'
import { Launchpad, type APISpaceXResponse } from '../types/api'
import Cardlauch from './Cardlauch.astro'

const res = await fetch('https://api.spacexdata.com/v5/Launches/query',{
  method:'POST',
  headers: {
    "Content-Type": "application/jsno",
  },
  body: JSON.stringify({
    query: {},
    options: {
        sort: {
            date_unix:'asc',
        },
        limit:12,
    },
  })
})

const { docs: lauches } = await res.json() as APISpaceXResponse
---

<div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3">
  {
    lauches.map(
      ({id,links,details, flight_number: flightNumber, success}) => (
        <Cardlauch 
          id={id}
          img={links.patch.small}
          details={details}
          flightNumber={flightNumber}
          success={success}
        />
      )
    )
  }
</div>